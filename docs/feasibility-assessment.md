# 可行性评估报告

> 版本：v2.2（现状对齐版）
> 评估日期：2026-02-14
> 说明：与 `docs/master-plan-v2.md`、`docs/implementation-roadmap-v2.md` 同步。

---

## 1. 环境与资源评估

### 1.1 当前开发环境

| 项目 | 配置 | 评估 |
|------|------|------|
| CPU | Apple M4 | ✅ 充足 |
| 内存 | 24 GB | ✅ 充足（当前量级远低于上限） |
| 存储 | 460 GB 可用 | ✅ 充足 |
| Python | 3.12.12（uv） | ✅ 与项目要求一致 |

### 1.2 运行时资源预估

| 组件 | 预估内存 | 预估CPU |
|------|---------|---------|
| FastAPI 服务 | 100-250 MB | 低 |
| ChromaDB/向量检索 | 50-150 MB | 低-中 |
| SQLite/PG 客户端 | <50 MB | 低 |
| 并发 HTTP 拉取 | 受网络带宽主导 | 低 |

**结论**：在当前机器上运行阶段6-10无硬件瓶颈。低配设备是否可跑需单独压测，不作为当前默认结论。

---

## 2. 数据源与稳定性评估

### 2.1 行情源（Yahoo Finance 为主）

| 维度 | 评估 | 风险 |
|------|------|------|
| 覆盖度 | 高 | 中 |
| 稳定性 | 中 | 中 |
| 延迟 | 15-20 分钟级 | 可接受 |

缓解策略：缓存、重试退避、失败回退、备用源预留接口。

### 2.2 新闻源（RSS + 官方公告）

| 维度 | 评估 | 风险 |
|------|------|------|
| 公开可获取性 | 高 | 低 |
| 源失效概率 | 中 | 中 |
| 解析异常概率 | 中 | 低 |

缓解策略：多源冗余、异常隔离、源健康巡检。

### 2.3 宏观数据源

| 数据源 | 评估 | 风险 |
|--------|------|------|
| SEC/EDGAR | 官方稳定 | 低 |
| FRED | 官方稳定（需 API Key） | 低 |
| US Treasury | 官方稳定 | 低 |
| HKMA/HKEX | 官方公开接口 | 低-中 |

---

## 3. 技术可行性评估

### 3.1 架构可行性

目标架构为“默认轻量 + 可选增强”双栈：

```text
默认：InMemoryStore + ChromaDB
可选：SQLite / Postgres + pgvector（开关启用）
```

评估结论：改动可控，可通过特性开关逐步上线，不需要一次性替换现有路径。

### 3.2 阶段复杂度

| 阶段 | 复杂度 | 主要难点 |
|------|--------|---------|
| 阶段6 | 中 | PG 向量索引、双栈兼容 |
| 阶段7 | 中-高 | Research 真数据拼装与回退策略 |
| 阶段8 | 中 | 未上市事件抽取准确率 |
| 阶段9 | 中-高 | 相关性统计解释与因果证据链 |
| 阶段10 | 中 | 模型路由与定时任务稳定性 |

总体工时区间：43-65 小时（与路线图一致）。

---

## 4. 风险矩阵（v2.2）

| 风险 | 概率 | 影响 | 等级 | 缓解措施 |
|------|------|------|------|---------|
| Yahoo Finance 限流 | 中 | 中 | 🟡 | 缓存 + 回退 + 备用源 |
| 数据源失效 | 中 | 中 | 🟡 | 多源冗余 + 巡检 |
| LLM 幻觉 | 中 | 中-高 | 🟡 | 证据链引用 + 明确免责声明 |
| Seed/真实数据混淆 | 中 | 中 | 🟡 | `source_type` 字段 + 前端标签 |
| PG 切换引入回归 | 低-中 | 高 | 🟡 | 特性开关 + 回归测试 |

---

## 5. 结论与实施前提

### 5.1 可行性结论

✅ 方案可执行，但需遵守三项约束：
1. 新能力均以开关方式接入，禁止破坏默认链路。
2. 研究/因果输出必须附来源或证据引用。
3. Seed 与实时数据必须在 API 和前端显式区分。

### 5.2 实施前提

- [x] Python 3.12（uv）环境就绪
- [x] 方案文档与路线图对齐到 v2.2
- [ ] DASHSCOPE_API_KEY 已配置
- [ ] FRED_API_KEY 已配置（启用宏观扩展时）
- [ ] Postgres + pgvector 本地联调环境（阶段6开始前）

---

*评估完成（v2.2），可按 `docs/todo.md` 进入下一阶段执行。*
